<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BSD Solution Entry</title>

    <script src="angular.min.js"></script>
    <script src="Chart.min.js"></script>
    <script src="angular-chart.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
    <script src="solution.js"></script>
    <link href="style.css" rel="stylesheet" />
    <link href="angular-chart.min.css" rel="stylesheet"/>
</head>
<body ng-app="BoundaryEntry">
    <div ng-controller="BoundaryController">
        <div id="panel" class="no-print">

            <div class="form-panel">
                <div class="form-header">BSD Solution Editor</div>
                <div class="form-body">
                    <form novalidate class="css-form">
                        <div class="form-row">
                            <label>Proposed High School</label>
                            <select name="ProposedHigh" id="proposedHigh" ng-model="data.proposedHigh" value="data.proposedHigh">
                                <option value="Aloha">Aloha</option>
                                <option value="Beaverton">Beaverton</option>
                                <option value="Cooper">Cooper Mountain</option>
                                <option value="Southridge">Southridge</option>
                                <option value="Sunset">Sunset</option>
                                <option value="Westview">Westview</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <label>Apply To</label>
                            <select name="PaintBy" id="paintBy" ng-model="data.paintBy" value="data.paintBy">
                                <option value="GC">Grid Code</option>
                                <option value="ES">Elementary Boundary</option>
                            </select>
                        </div>
                        <input type="button" ng-click="DBRefresh()" value="Refresh from DB" />
                    </form>
                </div>
            </div> <!-- BSD Solution Editor -->

            <div class="form-panel">
                <div class="form-header"><a href="#" ng-click="saveForm = !  saveForm">Save Solution</a></div>
                <div class="procedure-details form-body">
                    <form class="css-form" ng-submit="SaveSolution()" ng-show="saveForm">
                        <p>Simple clear saving instructions</p>

                        <div class="form-row">
                            <label>* Solution Name</label>
                            <input type="text" ng-model="data.solutionName" required />
                        </div>
                        <div class="form-row">
                            <label>* Description</label>
                            <input type="text" ng-model="data.solutionDescription" required />
                        </div>
                        <div class="form-row">
                            <label>* Submitter Name</label>
                            <input type="text" ng-model="data.solutionUsername" required />
                        </div>
                        <div class="form-row">
                            <label>* Submitter Email</label>
                            <input type="email" ng-model="data.solutionEmail" required />
                        </div>
                        <div class="form-row">
                            <label>URL</label>
                            <input type="url" ng-model="data.solutionUrl" />
                        </div>
                        <div class="form-row">
                            <label>Primary Objectives</label>
                            <select name="PrimaryObjectives" id="primaryObjectives" ng-model="data.submission.primaryObjectives" value="data.solution.primaryObjectives" multiple>
                                <option value="Space">Space</option>
                                <option value="Proximity">Proximity</option>
                                <option value="Safety">Safety</option>
                                <option value="Unity">Neighborhood Unity</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <label>Other Objectives</label>
                            <select name="OtherObjectives" id="otherObjectives" ng-model="data.submission.otherObjectives" value="data.solution.otherObjectives" multiple>
                                <option value="minTransitions">Minimize Transitions</option>
                                <option value="education">Education</option>
                                <option value="transportCost">Transportation Cost</option>
                                <option value="composition">Student Body Composition</option>
                                <option value="feeders">Feeder Schools</option>
                                <option value="buildingEfficiency">Building Efficiency</option>
                            </select>
                        </div>
                        <input type="submit" value="Save Solution" /> 
                        <p>{{data.solutionSaveResponse}}</p>
                    </form>
                    (Click Title to Open/Close Form)
                </div>
            </div> <!-- Save Panel -->

            <div class="form-panel">
                <div class="form-header"><a href="#" ng-click="loadForm = ! loadForm">Load Solution</a></div>
                <div class="procedure-details form-body">
                    <form class="css-form" ng-show="loadForm">
                        <p>Enter solution search terms:</p>

                        <div class="form-row">
                            <label>Solution Name</label>
                            <input type="text" ng-model="data.searchName" />
                        </div>
                        <div class="form-row">
                            <label>Description</label>
                            <input type="text" ng-model="data.searchDescription" />
                        </div>
                        <div class="form-row">
                            <label>Name</label>
                            <input type="text" ng-model="data.searchUsername" />
                        </div>
                        <div class="form-row">
                            <label>Email</label>
                            <input type="email" ng-model="data.searchEmail" />
                        </div>
                        <input type="button" ng-click="LoadFromDB()" value="Find Solutions" /><br>
                        <select id="myselection" multiple ng-multiple="false" ng-model="data.selectedSolution" ng-change="SelectSolution()" ng-options="c.solutionName for c in data.solutions"></select>
                    </form>
                    (Click Title to Open/Close Form)
                </div>
            </div> <!-- Load Panel -->

            <div class="panel-instructions">
                <p>This is a community developed tool to generate proposed
                attendance boundaries for the Beaverton School District* High
                Schools.</p>

                <p>To create your own map, start with the existing boundaries,
                or load a previously saved map. You can reload the existing
                boundaries by pressing "Refresh from DB". You can search for
                maps that meet your criteria in the Load Solution form. Once
                loaded, you can make your own changes. You will not be able to
                modify the existing maps, but you can save your changes as a new
                map in the Save Solution form.</p>

                <p>Next, select the "Proposed High School" from the drop down
                list. Then, in the "Apply to" drop down box, choose between
                applying the proposed high school to individual grid codes, or
                to all grid codes in the same elementary school boundary.
                Finally, click on the map to assign areas to high schools.</p>

                <p>As you make changes, the statistics are updated in real time
                below the map to help you evaluate the impact.</p>

                <p>When you have created a map you feel is worth saving, you can
                print it using your browser's print feature. You can also save
                it for others to see om tje Save Solution form.</p>
            </div>
            <hr/>
            <div class="panel-resources">
                <p>The data used in this tool was manually extracted, and may
                contain errors, from the following resources:</p>
                <a href="https://www.beaverton.k12.or.us/depts/facilities/boundary/HS%20Boundary%20Adjustment%20Process/11.12.15/Springboard%20Committee%20Table%20Map.pdf">Grid Codes</a> |
                <a href="https://www.beaverton.k12.or.us/depts/facilities/boundary/Documents/AllFacilities.pdf">BSD School Boundaries</a>
            </div>
            <hr/>
            <div class="panel-disclaimer">
                *This tool and the data provided are in no way authorized or
                supported by the Beaverton School District.
            </div>

            <!-- <pre>data = {{data | json}}</pre> -->
        </div> <!-- panel -->

        <div class="report">
            <div class="page no-break">
                <h1>Beaverton School District</h1>
                <h2>Community Proposed Map: {{data.mapTitle}}</h2>
                <div id="map-holder"></div>
            </div> <!-- page -->

            <div class="no-print"><hr/></div>

            <div class="page no-break">
                <div class="chart-row">
                    <div class="chart-panel">
                        <div class="chart-header">Percent Capacity</div>
                        <div class="chart-box">
                            <canvas id="bar2" class="chart chart-bar"
                                              height="250"
                                              chart-data="data.capacity_p"
                                              chart-labels="data.schools"
                                              chart-series="schools">
                            </canvas>
                            <div class="chart-caption">
                            </div>
                        </div>
                    </div>
                    <div class="chart-panel">
                        <div class="chart-header">Proximity</div>
                        <div class="chart-box">
                            <canvas id="bar3" class="chart chart-bar"
                                              height="250"
                                              chart-data="data.distance"
                                              chart-labels="data.schools"
                                              chart-series="schools">
                            </canvas>
                            <div class="chart-caption">
                                Travel Distance (miles): {{data.milesTraveled}}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chart-row">
                    <div class="chart-panel">
                        <div class="chart-header">Transitions</div>
                        <div class="chart-box">
                            <canvas id="bar4" class="chart chart-bar"
                                              height="250"
                                              chart-data="data.transitions"
                                              chart-labels="data.schools"
                                              chart-series="schools">
                            </canvas>
                            <div class="chart-caption">
                                Student Transitions: {{data.total_transitions}}
                            </div>
                        </div>
                    </div>
                    <div class="chart-panel">
                        <div class="chart-header">Equity</div>
                        <div class="chart-box">
                            <canvas id="bar5" class="chart chart-bar"
                                              height="250"
                                              chart-data="data.frl_p"
                                              chart-labels="data.schools"
                                              chart-series="schools">
                            </canvas>
                            <div class="chart-caption">
                                As measured by Free and Reduced Lunch Percentage
                            </div>
                        </div>
                    </div>
                </div>
                <hr/>
                This is a community generated map and is not endorsed in any way
                by the Beaverton School District.
            </div> <!-- page -->

        </div> <!-- report -->
    </div>
</body>
</html>
